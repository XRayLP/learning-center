<?xml version="1.0" ?>

<!--
  ~ @link https://github.com/XRayLP/learning-center-bundle
  ~ @copyright Copyright (c) 2018 Niklas Loos <https://github.com/XRayLP>
  ~ @license GPL-3.0 <https://github.com/XRayLP/learning-center-bundle/blob/master/LICENSE>
  -->

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>
        <defaults public="false" />

        <!-- ResolvedFormTypeFactory -->
        <service id="form.resolved_type_factory" class="Symfony\Component\Form\ResolvedFormTypeFactory" />
        <service id="Symfony\Component\Form\ResolvedFormTypeFactoryInterface" alias="form.resolved_type_factory" />

        <!-- FormRegistry -->
        <service id="form.registry" class="Symfony\Component\Form\FormRegistry">
            <argument type="collection">
                <!--
                We don't need to be able to add more extensions.
                 * more types can be registered with the form.type tag
                 * more type extensions can be registered with the form.type_extension tag
                 * more type_guessers can be registered with the form.type_guesser tag
                -->
                <argument type="service" id="form.extension" />
            </argument>
            <argument type="service" id="form.resolved_type_factory" />
        </service>
        <service id="Symfony\Component\Form\FormRegistryInterface" alias="form.registry" />

        <!-- FormFactory -->
        <service id="form.factory" class="Symfony\Component\Form\FormFactory" public="true">
            <argument type="service" id="form.registry" />
            <argument type="service" id="form.resolved_type_factory" />
        </service>
        <service id="Symfony\Component\Form\FormFactoryInterface" alias="form.factory" />

        <!-- DependencyInjectionExtension -->
        <service id="form.extension" class="Symfony\Component\Form\Extension\DependencyInjection\DependencyInjectionExtension">
            <argument /><!-- All services with tag "form.type" are stored in a service locator by FormPass -->
            <argument type="collection" /><!-- All services with tag "form.type_extension" are stored here by FormPass -->
            <argument type="iterator" /><!-- All services with tag "form.type_guesser" are stored here by FormPass -->
            <argument>null</argument><!-- @deprecated argument in 3.3, to be removed in 4.0 -->
        </service>

        <!-- FormTypeHttpFoundationExtension -->
        <service id="form.type_extension.form.http_foundation" class="Symfony\Component\Form\Extension\HttpFoundation\Type\FormTypeHttpFoundationExtension">
            <argument type="service" id="form.type_extension.form.request_handler" />
            <tag name="form.type_extension" extended-type="Symfony\Component\Form\Extension\Core\Type\FormType" />
        </service>

        <!-- HttpFoundationRequestHandler -->
        <service id="form.type_extension.form.request_handler" class="Symfony\Component\Form\Extension\HttpFoundation\HttpFoundationRequestHandler">
            <argument type="service" id="form.server_params" />
        </service>

        <service id="form.server_params" class="Symfony\Component\Form\Util\ServerParams">
            <argument type="service" id="request_stack" />
        </service>

        <service id="form.resolved_type_factory" class="Symfony\Component\Form\Extension\DataCollector\Proxy\ResolvedTypeFactoryDataCollectorProxy">
            <argument type="service">
                <service class="Symfony\Component\Form\ResolvedFormTypeFactory" />
            </argument>
            <argument type="service" id="data_collector.form" />
        </service>

        <!-- DataCollectorTypeExtension -->
        <service id="form.type_extension.form.data_collector" class="Symfony\Component\Form\Extension\DataCollector\Type\DataCollectorTypeExtension">
            <tag name="form.type_extension" extended-type="Symfony\Component\Form\Extension\Core\Type\FormType" />
            <argument type="service" id="data_collector.form" />
        </service>

        <!-- DataCollector -->
        <service id="data_collector.form.extractor" class="Symfony\Component\Form\Extension\DataCollector\FormDataExtractor" />

        <service id="data_collector.form" class="Symfony\Component\Form\Extension\DataCollector\FormDataCollector">
            <tag name="data_collector" template="@WebProfiler/Collector/form.html.twig" id="form" priority="310" />
            <argument type="service" id="data_collector.form.extractor" />
        </service>
    </services>
</container>
